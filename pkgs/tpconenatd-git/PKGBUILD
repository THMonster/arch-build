pkgname=tpconenatd-git
pkgver=r8.999a023
pkgrel=1
pkgdesc='User space udp nat tool.'
arch=('x86_64')
license=('GPL2')
provides=('tpconenatd')
makedepends=(
             'cmake'
             )

source=(
    "tpconenatd::git+https://github.com/claw6148/TPConeNATd.git#branch=master"
)

pkgver() {
    cd tpconenatd
    # git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
	echo "r$(git rev-list --count HEAD).$(git rev-parse --short HEAD)"
}

sha256sums=(
    'SKIP'
)

build() {
    cd tpconenatd
	cmake -DCMAKE_BUILD_TYPE=Release .
	make
}

package() {
    cd tpconenatd
    install -Dm755 ./TPConeNATd "${pkgdir}/usr/bin/TPConeNATd"
}
